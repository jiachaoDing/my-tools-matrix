<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protect PDF with Password - Free & Secure | WebUtilityKit</title>
    <meta name="description" content="Add password protection to your PDF files online for free. Secure your documents with encryption. 100% client-side processing - your files never leave your browser.">
    <link href="../assets/css/styles.css" rel="stylesheet">
    <!-- Using pdf.js for reading and jspdf for creating encrypted PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-100 font-sans min-h-screen flex flex-col transition-colors">
    
    <header class="border-b border-slate-200/70 dark:border-slate-800/80 bg-white/80 dark:bg-slate-900/80 backdrop-blur">
        <nav class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between gap-4">
            <a href="/" class="flex items-center gap-2 text-xl font-bold tracking-tight text-blue-600 dark:text-blue-400">
                WebUtilityKit<span class="text-slate-400 font-normal">.com</span>
            </a>
            <div class="flex items-center gap-3 text-sm text-slate-600 dark:text-slate-300">
                <span class="hidden sm:inline">100+ privacy-first tools</span>
                <a href="mailto:yinb9933@gmail.com" 
                   class="flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-700 px-3 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition"
                   title="Contact us for feedback or suggestions">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    <span class="hidden md:inline">Contact</span>
                </a>
                <button id="theme-toggle" class="flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-700 px-3 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition">
                    <span id="theme-icon">ðŸŒ—</span>
                    <span class="hidden sm:inline">Toggle theme</span>
                </button>
            </div>
        </nav>
    </header>

    <main class="flex-grow w-full py-12 px-4 sm:px-6">
        
        <div class="max-w-4xl mx-auto text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight mb-4 text-slate-900 dark:text-white">Protect PDF with Password</h1>
            <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">Add password protection to your PDF files. Secure your sensitive documents with AES-128 encryption.</p>
            <div class="mt-6 flex items-center justify-center gap-2 text-sm font-medium text-green-700 dark:text-green-400 bg-green-100/50 dark:bg-green-900/20 py-1.5 px-4 rounded-full w-fit mx-auto">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                <span>100% Secure. Processed locally.</span>
            </div>
        </div>

        <div id="tool-wrapper" class="w-full max-w-4xl mx-auto mb-24">
            <div class="bg-white dark:bg-slate-800/50 rounded-3xl p-8 md:p-10">
                
                <!-- Drop Zone -->
                <div id="drop-zone" class="relative border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-2xl p-12 text-center cursor-pointer hover:border-sky-500 dark:hover:border-sky-400 transition-colors group">
                    <input type="file" id="file-input" accept=".pdf" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
                    <div id="drop-overlay" class="absolute inset-0 bg-sky-500/10 dark:bg-sky-500/20 rounded-2xl flex items-center justify-center opacity-0 pointer-events-none transition-opacity">
                        <span class="text-sky-600 dark:text-sky-400 font-semibold text-lg">Drop PDF here</span>
                    </div>
                    <svg class="w-16 h-16 mx-auto text-slate-400 dark:text-slate-500 mb-4 group-hover:text-sky-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <p class="text-slate-600 dark:text-slate-400 mb-2">Drag & drop your PDF file here</p>
                    <p class="text-slate-500 dark:text-slate-500 text-sm">or click to browse</p>
                </div>

                <!-- Selected File Info -->
                <div id="file-info" class="hidden mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-red-600 dark:text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <div>
                                <p id="file-name" class="font-medium text-slate-900 dark:text-white truncate max-w-xs"></p>
                                <p id="file-size" class="text-sm text-slate-500 dark:text-slate-400"></p>
                            </div>
                        </div>
                        <button id="remove-file" class="p-2 text-slate-400 hover:text-red-500 transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Password Settings -->
                <div id="password-section" class="hidden mt-8 space-y-6">
                    <h3 class="text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2">
                        <svg class="w-5 h-5 text-sky-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                        Password Settings
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- User Password -->
                        <div>
                            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                                Password to open PDF
                            </label>
                            <div class="relative">
                                <input type="password" id="user-password" placeholder="Enter a strong password" 
                                       class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition pr-12" />
                                <button type="button" class="toggle-password absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300">
                                    <svg class="w-5 h-5 eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                    <svg class="w-5 h-5 eye-off-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Confirm Password -->
                        <div>
                            <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                                Confirm password
                            </label>
                            <div class="relative">
                                <input type="password" id="confirm-password" placeholder="Re-enter password" 
                                       class="w-full px-4 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition pr-12" />
                                <button type="button" class="toggle-password absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300">
                                    <svg class="w-5 h-5 eye-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                    <svg class="w-5 h-5 eye-off-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
                                    </svg>
                                </button>
                            </div>
                            <p id="password-match-error" class="hidden mt-1.5 text-xs text-red-500">Passwords do not match</p>
                        </div>
                    </div>

                    <!-- Password Strength -->
                    <div id="password-strength" class="hidden">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-sm text-slate-600 dark:text-slate-400">Password Strength:</span>
                            <span id="strength-text" class="text-sm font-medium"></span>
                        </div>
                        <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                            <div id="strength-bar" class="h-full transition-all duration-300 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>

                    <!-- Info Notice -->
                    <div class="p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl">
                        <div class="flex gap-3">
                            <svg class="w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="text-sm text-amber-800 dark:text-amber-300">
                                <p class="font-medium mb-1">Important:</p>
                                <ul class="list-disc list-inside space-y-1 text-amber-700 dark:text-amber-400">
                                    <li>Remember your password - it cannot be recovered</li>
                                    <li>Uses AES-128 encryption for strong security</li>
                                    <li>Original formatting and images are preserved</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div id="action-buttons" class="hidden mt-8 flex flex-col sm:flex-row gap-4">
                    <button id="protect-btn" class="flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                        <span>Protect PDF</span>
                    </button>
                    <button id="clear-btn" class="flex items-center justify-center gap-2 px-6 py-4 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 font-semibold rounded-xl transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        <span>Clear</span>
                    </button>
                </div>

                <!-- Progress -->
                <div id="progress-section" class="hidden mt-6">
                    <div class="flex items-center justify-between mb-2">
                        <span id="progress-status" class="text-sm text-slate-600 dark:text-slate-400">Processing...</span>
                        <span id="progress-text" class="text-sm font-medium text-slate-900 dark:text-white">0%</span>
                    </div>
                    <div class="h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
                        <div id="progress-bar" class="h-full bg-sky-500 transition-all duration-300 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Result -->
                <div id="result-section" class="hidden mt-8">
                    <div class="p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-2xl">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            <div>
                                <p class="font-semibold text-green-800 dark:text-green-300">PDF Protected Successfully!</p>
                                <p class="text-sm text-green-600 dark:text-green-400">Your file is now password protected with AES-128 encryption</p>
                            </div>
                        </div>
                        <button id="download-btn" class="w-full flex items-center justify-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-xl transition-colors">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                            </svg>
                            <span>Download Protected PDF</span>
                        </button>
                    </div>
                </div>

                <!-- Error -->
                <div id="error-section" class="hidden mt-6">
                    <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl">
                        <div class="flex items-center gap-3">
                            <svg class="w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <p id="error-message" class="text-red-700 dark:text-red-300 text-sm"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Editorial Section -->
        <div class="max-w-5xl mx-auto border-t border-slate-200 dark:border-slate-800 pt-24 pb-24">
            <article class="space-y-24">
                
                <!-- How to Use -->
                <section>
                    <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-12 text-center italic tracking-tight">How to Protect Your PDF</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="relative p-8 rounded-[2.5rem] bg-white dark:bg-slate-800/40 border border-slate-100 dark:border-slate-700/50 hover:shadow-2xl hover:shadow-sky-500/5 transition-all group text-center">
                            <div class="w-16 h-16 bg-sky-600 text-white rounded-2xl flex items-center justify-center font-bold text-2xl shadow-lg shadow-sky-500/30 mx-auto mb-6 group-hover:scale-110 transition-transform">1</div>
                            <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-3 text-pretty">Upload PDF</h3>
                            <p class="text-slate-600 dark:text-slate-400 leading-relaxed text-sm text-pretty">Drag and drop your PDF file or click to browse. Your file stays on your device.</p>
                        </div>
                        <div class="relative p-8 rounded-[2.5rem] bg-white dark:bg-slate-800/40 border border-slate-100 dark:border-slate-700/50 hover:shadow-2xl hover:shadow-sky-500/5 transition-all group text-center">
                            <div class="w-16 h-16 bg-sky-600 text-white rounded-2xl flex items-center justify-center font-bold text-2xl shadow-lg shadow-sky-500/30 mx-auto mb-6 group-hover:scale-110 transition-transform">2</div>
                            <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-3 text-pretty">Set Password</h3>
                            <p class="text-slate-600 dark:text-slate-400 leading-relaxed text-sm text-pretty">Enter a strong password. Use a mix of letters, numbers, and symbols for best security.</p>
                        </div>
                        <div class="relative p-8 rounded-[2.5rem] bg-white dark:bg-slate-800/40 border border-slate-100 dark:border-slate-700/50 hover:shadow-2xl hover:shadow-sky-500/5 transition-all group text-center">
                            <div class="w-16 h-16 bg-sky-600 text-white rounded-2xl flex items-center justify-center font-bold text-2xl shadow-lg shadow-sky-500/30 mx-auto mb-6 group-hover:scale-110 transition-transform">3</div>
                            <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-3 text-pretty">Download</h3>
                            <p class="text-slate-600 dark:text-slate-400 leading-relaxed text-sm text-pretty">Click protect and download your secured PDF. Share it safely with anyone.</p>
                        </div>
                    </div>
                </section>

                <!-- High Contrast Section -->
                <section class="bg-slate-900 rounded-[3rem] p-12 text-white relative overflow-hidden shadow-2xl">
                    <div class="absolute top-0 right-0 -mr-24 -mt-24 w-96 h-96 bg-sky-500/10 rounded-full blur-3xl"></div>
                    <div class="relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                        <div>
                            <h2 class="text-4xl font-bold mb-6 italic tracking-tight">Why Password Protect PDFs?</h2>
                            <p class="text-lg text-slate-400 leading-relaxed mb-8">
                                In today's digital world, protecting sensitive documents is crucial. Whether it's financial reports, contracts, or personal information, password protection ensures only authorized people can access your files.
                            </p>
                            <div class="space-y-4">
                                <div class="flex items-center gap-4">
                                    <div class="w-2 h-2 bg-sky-500 rounded-full"></div>
                                    <span class="text-slate-200">Prevent unauthorized access</span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <div class="w-2 h-2 bg-sky-500 rounded-full"></div>
                                    <span class="text-slate-200">Secure sensitive information</span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <div class="w-2 h-2 bg-sky-500 rounded-full"></div>
                                    <span class="text-slate-200">Comply with data regulations</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-center">
                            <div class="relative">
                                <div class="w-64 h-64 border-4 border-dashed border-sky-500/20 rounded-full animate-[spin_60s_linear_infinite]"></div>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <svg class="w-32 h-32 text-sky-500/40" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Feature Grid -->
                <section>
                    <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-12 text-center">Why Choose Our PDF Protector?</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="flex gap-6 p-10 rounded-[2.5rem] bg-slate-50 dark:bg-slate-800/20 border-2 border-transparent hover:border-sky-500/10 transition-all group">
                            <div class="flex-shrink-0 w-14 h-14 bg-sky-100 dark:bg-sky-900/30 text-sky-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-2">Client-Side Processing</h3>
                                <p class="text-slate-600 dark:text-slate-400 leading-relaxed text-sm">Your PDF never leaves your browser. All encryption happens locally on your device.</p>
                            </div>
                        </div>
                        <div class="flex gap-6 p-10 rounded-[2.5rem] bg-slate-50 dark:bg-slate-800/20 border-2 border-transparent hover:border-sky-500/10 transition-all group">
                            <div class="flex-shrink-0 w-14 h-14 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-2">AES-128 Encryption</h3>
                                <p class="text-slate-600 dark:text-slate-400 leading-relaxed text-sm">Industry-standard encryption ensures your documents remain secure and protected.</p>
                            </div>
                        </div>
                        <div class="flex gap-6 p-10 rounded-[2.5rem] bg-slate-50 dark:bg-slate-800/20 border-2 border-transparent hover:border-sky-500/10 transition-all group">
                            <div class="flex-shrink-0 w-14 h-14 bg-purple-100 dark:bg-purple-900/30 text-purple-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-2">Preserves Quality</h3>
                                <p class="text-slate-600 dark:text-slate-400 leading-relaxed text-sm">All images, text, and formatting are preserved at their original quality.</p>
                            </div>
                        </div>
                        <div class="flex gap-6 p-10 rounded-[2.5rem] bg-slate-50 dark:bg-slate-800/20 border-2 border-transparent hover:border-sky-500/10 transition-all group">
                            <div class="flex-shrink-0 w-14 h-14 bg-orange-100 dark:bg-orange-900/30 text-orange-600 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-transform">
                                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-2">Fast Processing</h3>
                                <p class="text-slate-600 dark:text-slate-400 leading-relaxed text-sm">No waiting for uploads or server processing. Encryption happens instantly in your browser.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- FAQ -->
                <section>
                    <h2 class="text-3xl font-bold text-slate-900 dark:text-white mb-12 text-center italic">Frequently Asked Questions</h2>
                    <div class="max-w-3xl mx-auto space-y-4">
                        <details class="group bg-slate-50 dark:bg-slate-800/20 rounded-[2rem] p-8 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/40 transition-all border border-transparent hover:border-sky-500/10">
                            <summary class="flex justify-between items-center font-bold text-slate-900 dark:text-white list-none">
                                <span class="text-xl">How secure is the encryption?</span>
                                <span class="transition-transform group-open:rotate-180 bg-white dark:bg-slate-700 p-2 rounded-xl shadow-sm">
                                    <svg fill="none" height="20" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" width="20"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-slate-600 dark:text-slate-400 mt-6 leading-relaxed text-lg text-pretty">
                                We use <strong>AES-128 encryption</strong>, which is an industry-standard encryption algorithm. This is the same level of security used by many professional PDF tools and provides strong protection for your documents.
                            </div>
                        </details>
                        
                        <details class="group bg-slate-50 dark:bg-slate-800/20 rounded-[2rem] p-8 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/40 transition-all border border-transparent hover:border-sky-500/10">
                            <summary class="flex justify-between items-center font-bold text-slate-900 dark:text-white list-none">
                                <span class="text-xl">Is my PDF uploaded to a server?</span>
                                <span class="transition-transform group-open:rotate-180 bg-white dark:bg-slate-700 p-2 rounded-xl shadow-sm">
                                    <svg fill="none" height="20" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" width="20"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-slate-600 dark:text-slate-400 mt-6 leading-relaxed text-lg text-pretty">
                                <strong>No.</strong> Your PDF file never leaves your device. All processing happens entirely in your browser using JavaScript. We don't have any servers that handle your documents - your privacy is guaranteed.
                            </div>
                        </details>

                        <details class="group bg-slate-50 dark:bg-slate-800/20 rounded-[2rem] p-8 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/40 transition-all border border-transparent hover:border-sky-500/10">
                            <summary class="flex justify-between items-center font-bold text-slate-900 dark:text-white list-none">
                                <span class="text-xl">What if I forget my password?</span>
                                <span class="transition-transform group-open:rotate-180 bg-white dark:bg-slate-700 p-2 rounded-xl shadow-sm">
                                    <svg fill="none" height="20" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" width="20"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-slate-600 dark:text-slate-400 mt-6 leading-relaxed text-lg text-pretty">
                                Since all processing happens locally and we never see your password, <strong>there is no way to recover it</strong>. Make sure to remember your password or store it securely in a password manager.
                            </div>
                        </details>

                        <details class="group bg-slate-50 dark:bg-slate-800/20 rounded-[2rem] p-8 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800/40 transition-all border border-transparent hover:border-sky-500/10">
                            <summary class="flex justify-between items-center font-bold text-slate-900 dark:text-white list-none">
                                <span class="text-xl">Can I remove the password later?</span>
                                <span class="transition-transform group-open:rotate-180 bg-white dark:bg-slate-700 p-2 rounded-xl shadow-sm">
                                    <svg fill="none" height="20" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24" width="20"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-slate-600 dark:text-slate-400 mt-6 leading-relaxed text-lg text-pretty">
                                Yes! If you know the password, you can use our <a href="/unlock-pdf" class="text-sky-600 dark:text-sky-400 hover:underline">Unlock PDF</a> tool to remove password protection from your document.
                            </div>
                        </details>
                    </div>
                </section>
            </article>
        </div>
      
    </main>

    <footer class="border-t border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur">
        <div class="max-w-7xl mx-auto px-4 py-8 text-sm text-slate-600 dark:text-slate-400 flex flex-col sm:flex-row items-center justify-between gap-3">
            <div>&copy; 2025 WebUtilityKit.com</div>
            <div class="text-slate-500 dark:text-slate-400">Client-side by design. Built for Cloudflare Pages.</div>
        </div>
    </footer>


    <script>
        // === Theme Logic ===
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        function updateTheme() {
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                html.classList.add('dark');
            } else { html.classList.remove('dark'); }
        }
        updateTheme();
        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
        });

        // === PDF.js Setup ===
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        const { jsPDF } = window.jspdf;

        // === DOM Elements ===
        const dropZone = document.getElementById('drop-zone');
        const dropOverlay = document.getElementById('drop-overlay');
        const fileInput = document.getElementById('file-input');
        const fileInfo = document.getElementById('file-info');
        const fileName = document.getElementById('file-name');
        const fileSize = document.getElementById('file-size');
        const removeFile = document.getElementById('remove-file');
        const passwordSection = document.getElementById('password-section');
        const userPassword = document.getElementById('user-password');
        const confirmPassword = document.getElementById('confirm-password');
        const passwordMatchError = document.getElementById('password-match-error');
        const passwordStrength = document.getElementById('password-strength');
        const strengthText = document.getElementById('strength-text');
        const strengthBar = document.getElementById('strength-bar');
        const actionButtons = document.getElementById('action-buttons');
        const protectBtn = document.getElementById('protect-btn');
        const clearBtn = document.getElementById('clear-btn');
        const progressSection = document.getElementById('progress-section');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const progressStatus = document.getElementById('progress-status');
        const resultSection = document.getElementById('result-section');
        const downloadBtn = document.getElementById('download-btn');
        const errorSection = document.getElementById('error-section');
        const errorMessage = document.getElementById('error-message');

        let selectedFile = null;
        let protectedPdfBlob = null;

        // Format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Check password strength
        function checkPasswordStrength(password) {
            let score = 0;
            if (password.length >= 8) score++;
            if (password.length >= 12) score++;
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) score++;
            if (/\d/.test(password)) score++;
            if (/[^a-zA-Z0-9]/.test(password)) score++;
            return score;
        }

        function updateStrengthIndicator(password) {
            if (!password) {
                passwordStrength.classList.add('hidden');
                return;
            }
            
            passwordStrength.classList.remove('hidden');
            const score = checkPasswordStrength(password);
            
            const levels = [
                { text: 'Very Weak', color: 'bg-red-500', textColor: 'text-red-500', width: '20%' },
                { text: 'Weak', color: 'bg-orange-500', textColor: 'text-orange-500', width: '40%' },
                { text: 'Fair', color: 'bg-yellow-500', textColor: 'text-yellow-500', width: '60%' },
                { text: 'Strong', color: 'bg-green-500', textColor: 'text-green-500', width: '80%' },
                { text: 'Very Strong', color: 'bg-emerald-500', textColor: 'text-emerald-500', width: '100%' }
            ];
            
            const level = levels[Math.min(score, 4)];
            strengthText.textContent = level.text;
            strengthText.className = `text-sm font-medium ${level.textColor}`;
            strengthBar.className = `h-full transition-all duration-300 rounded-full ${level.color}`;
            strengthBar.style.width = level.width;
        }

        // Toggle password visibility
        document.querySelectorAll('.toggle-password').forEach(btn => {
            btn.addEventListener('click', () => {
                const input = btn.parentElement.querySelector('input');
                const eyeIcon = btn.querySelector('.eye-icon');
                const eyeOffIcon = btn.querySelector('.eye-off-icon');
                
                if (input.type === 'password') {
                    input.type = 'text';
                    eyeIcon.classList.add('hidden');
                    eyeOffIcon.classList.remove('hidden');
                } else {
                    input.type = 'password';
                    eyeIcon.classList.remove('hidden');
                    eyeOffIcon.classList.add('hidden');
                }
            });
        });

        // Drag and drop handlers
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, (e) => {
                e.preventDefault();
                e.stopPropagation();
            });
        });

        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => {
                dropOverlay.classList.remove('opacity-0', 'pointer-events-none');
                dropOverlay.classList.add('opacity-100');
            });
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => {
                dropOverlay.classList.add('opacity-0', 'pointer-events-none');
                dropOverlay.classList.remove('opacity-100');
            });
        });

        dropZone.addEventListener('drop', (e) => {
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        function handleFile(file) {
            if (file.type !== 'application/pdf') {
                showError('Please select a valid PDF file.');
                return;
            }

            selectedFile = file;
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            
            fileInfo.classList.remove('hidden');
            passwordSection.classList.remove('hidden');
            actionButtons.classList.remove('hidden');
            resultSection.classList.add('hidden');
            errorSection.classList.add('hidden');
        }

        removeFile.addEventListener('click', clearAll);
        clearBtn.addEventListener('click', clearAll);

        function clearAll() {
            selectedFile = null;
            protectedPdfBlob = null;
            fileInput.value = '';
            userPassword.value = '';
            confirmPassword.value = '';
            
            fileInfo.classList.add('hidden');
            passwordSection.classList.add('hidden');
            actionButtons.classList.add('hidden');
            progressSection.classList.add('hidden');
            resultSection.classList.add('hidden');
            errorSection.classList.add('hidden');
            passwordStrength.classList.add('hidden');
            passwordMatchError.classList.add('hidden');
        }

        userPassword.addEventListener('input', () => {
            updateStrengthIndicator(userPassword.value);
            validatePasswords();
        });

        confirmPassword.addEventListener('input', validatePasswords);

        function validatePasswords() {
            if (confirmPassword.value && userPassword.value !== confirmPassword.value) {
                passwordMatchError.classList.remove('hidden');
                return false;
            } else {
                passwordMatchError.classList.add('hidden');
                return true;
            }
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorSection.classList.remove('hidden');
            progressSection.classList.add('hidden');
        }

        function updateProgress(percent, status) {
            progressBar.style.width = percent + '%';
            progressText.textContent = Math.round(percent) + '%';
            if (status) {
                progressStatus.textContent = status;
            }
        }

        protectBtn.addEventListener('click', async () => {
            if (!selectedFile) {
                showError('Please select a PDF file first.');
                return;
            }

            const password = userPassword.value.trim();
            if (!password) {
                showError('Please enter a password to protect the PDF.');
                return;
            }

            if (password.length < 4) {
                showError('Password must be at least 4 characters long.');
                return;
            }

            if (!validatePasswords()) {
                showError('Passwords do not match.');
                return;
            }

            try {
                protectBtn.disabled = true;
                progressSection.classList.remove('hidden');
                resultSection.classList.add('hidden');
                errorSection.classList.add('hidden');
                updateProgress(5, 'Loading PDF...');

                // Read the file
                const fileArrayBuffer = await selectedFile.arrayBuffer();
                updateProgress(10, 'Parsing PDF...');

                // Load PDF with PDF.js
                const loadingTask = pdfjsLib.getDocument({ data: fileArrayBuffer });
                const pdfDoc = await loadingTask.promise;
                const numPages = pdfDoc.numPages;
                
                updateProgress(20, 'Reading pages...');

                // Get first page to determine dimensions
                const firstPage = await pdfDoc.getPage(1);
                const viewport = firstPage.getViewport({ scale: 1 });
                
                // Create new jsPDF document with encryption
                // Determine orientation based on first page
                const isLandscape = viewport.width > viewport.height;
                const doc = new jsPDF({
                    orientation: isLandscape ? 'landscape' : 'portrait',
                    unit: 'pt',
                    format: [viewport.width, viewport.height],
                    encryption: {
                        userPassword: password,
                        ownerPassword: password,
                        userPermissions: ['print', 'copy']
                    }
                });

                // Render each page
                for (let pageNum = 1; pageNum <= numPages; pageNum++) {
                    updateProgress(20 + (pageNum / numPages) * 70, `Processing page ${pageNum} of ${numPages}...`);
                    
                    const page = await pdfDoc.getPage(pageNum);
                    const pageViewport = page.getViewport({ scale: 2 }); // Higher scale for better quality
                    
                    // Create canvas for rendering
                    const canvas = document.createElement('canvas');
                    const context = canvas.getContext('2d');
                    canvas.height = pageViewport.height;
                    canvas.width = pageViewport.width;

                    // Render page to canvas
                    await page.render({
                        canvasContext: context,
                        viewport: pageViewport
                    }).promise;

                    // Convert canvas to image
                    const imgData = canvas.toDataURL('image/jpeg', 0.95);
                    
                    // Add new page if not first page
                    if (pageNum > 1) {
                        const currentPageViewport = page.getViewport({ scale: 1 });
                        const currentIsLandscape = currentPageViewport.width > currentPageViewport.height;
                        doc.addPage([currentPageViewport.width, currentPageViewport.height], currentIsLandscape ? 'landscape' : 'portrait');
                    }

                    // Get current page dimensions
                    const currentPageViewport = page.getViewport({ scale: 1 });
                    
                    // Add image to PDF
                    doc.addImage(imgData, 'JPEG', 0, 0, currentPageViewport.width, currentPageViewport.height, undefined, 'FAST');
                }

                updateProgress(95, 'Encrypting PDF...');

                // Generate the protected PDF
                protectedPdfBlob = doc.output('blob');

                updateProgress(100, 'Complete!');

                // Show success
                setTimeout(() => {
                    progressSection.classList.add('hidden');
                    resultSection.classList.remove('hidden');
                }, 300);
                
            } catch (error) {
                console.error('Protection error:', error);
                showError('Failed to protect PDF. ' + (error.message || 'The file may be corrupted or already encrypted.'));
            } finally {
                protectBtn.disabled = false;
            }
        });

        downloadBtn.addEventListener('click', () => {
            if (!protectedPdfBlob) return;

            const url = URL.createObjectURL(protectedPdfBlob);
            const a = document.createElement('a');
            
            // Generate filename
            const originalName = selectedFile.name.replace(/\.pdf$/i, '');
            a.href = url;
            a.download = `${originalName}_protected.pdf`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });
    </script>
</body>
</html>
