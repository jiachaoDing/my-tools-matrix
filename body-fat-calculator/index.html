<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Body Fat Calculator - Free, Secure & Unlimited | WebUtilityKit</title>
    <meta name="description" content="Calculate your body fat percentage using the U.S. Navy method. Supports Metric and Imperial units. 100% client-side, private, and free.">
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = { darkMode: 'class' };
    </script>
</head>
<body class="bg-slate-50 text-slate-900 dark:bg-slate-900 dark:text-slate-100 font-sans transition-colors duration-200">
    <header class="border-b border-slate-200/70 dark:border-slate-800/80 bg-white/80 dark:bg-slate-900/80 backdrop-blur sticky top-0 z-50">
        <nav class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between gap-4">
            <a href="/" class="flex items-center gap-2 text-xl font-bold tracking-tight text-blue-600 dark:text-blue-400">
                WebUtilityKit<span class="text-slate-400 font-normal">.com</span>
            </a>
            <div class="flex items-center gap-3 text-sm text-slate-600 dark:text-slate-300">
                <span class="hidden sm:inline">100% privacy-first tools</span>
                <button id="theme-toggle" class="flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-700 px-3 py-2 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition" aria-label="Toggle dark mode">
                    <span id="theme-icon">ðŸŒ—</span>
                    <span class="hidden sm:inline">Toggle theme</span>
                </button>
            </div>
        </nav>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-12">
        <h1 class="text-4xl font-extrabold text-center mb-4 text-slate-800 dark:text-white">Body Fat Calculator</h1>
        <p class="text-center text-slate-600 dark:text-slate-400 mb-6 text-lg">Estimate your body fat percentage using the U.S. Navy fitness formula.</p>

        <div class="flex items-center justify-center gap-2 text-sm text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20 py-2 px-4 rounded-full mb-8 mx-auto w-fit border border-green-200 dark:border-green-900">
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                <path d="M9 12l2 2 4-4"></path>
            </svg>
            <span class="font-medium">ðŸ”’ 100% Secure. Processed locally in browser. No upload.</span>
        </div>

        <div id="app" class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 transition-all">
            <div class="grid lg:grid-cols-2 gap-12">
                <!-- Input Section -->
                <div class="space-y-6">
                    <div class="flex p-1 bg-slate-100 dark:bg-slate-900 rounded-xl">
                        <button id="unit-metric" class="flex-1 py-2 px-4 rounded-lg text-sm font-bold transition-all bg-white dark:bg-slate-800 shadow-sm text-blue-600 dark:text-blue-400">Metric (cm)</button>
                        <button id="unit-imperial" class="flex-1 py-2 px-4 rounded-lg text-sm font-bold transition-all text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200">Imperial (in)</button>
                    </div>

                    <div class="space-y-4">
                        <div class="space-y-2">
                            <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300">Gender</label>
                            <div class="grid grid-cols-2 gap-3">
                                <label class="flex items-center justify-center gap-2 p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 cursor-pointer transition-all hover:border-blue-300">
                                    <input type="radio" name="gender" value="male" checked class="accent-blue-600">
                                    <span class="font-medium">Male</span>
                                </label>
                                <label class="flex items-center justify-center gap-2 p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 cursor-pointer transition-all hover:border-blue-300">
                                    <input type="radio" name="gender" value="female" class="accent-blue-600">
                                    <span class="font-medium">Female</span>
                                </label>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div class="space-y-2">
                                <label for="weight" class="block text-sm font-semibold text-slate-700 dark:text-slate-300">Weight (<span id="weight-unit">kg</span>)</label>
                                <input type="number" id="weight" placeholder="75" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                            </div>
                            <div class="space-y-2">
                                <label for="height" class="block text-sm font-semibold text-slate-700 dark:text-slate-300">Height (<span class="unit-text">cm</span>)</label>
                                <input type="number" id="height" placeholder="175" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                            </div>
                            <div class="space-y-2">
                                <label for="neck" class="block text-sm font-semibold text-slate-700 dark:text-slate-300">Neck (<span class="unit-text">cm</span>)</label>
                                <input type="number" id="neck" placeholder="38" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                            </div>
                            <div class="space-y-2">
                                <label for="waist" class="block text-sm font-semibold text-slate-700 dark:text-slate-300">Waist (<span class="unit-text">cm</span>)</label>
                                <input type="number" id="waist" placeholder="85" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                            </div>
                            <div id="hip-container" class="space-y-2 hidden">
                                <label for="hip" class="block text-sm font-semibold text-slate-700 dark:text-slate-300">Hip (<span class="unit-text">cm</span>)</label>
                                <input type="number" id="hip" placeholder="95" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                            </div>
                        </div>
                    </div>

                    <button id="calculate-btn" class="w-full py-4 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 active:scale-[0.98] transition-all">Calculate Body Fat</button>
                </div>

                <!-- Result Section -->
                <div class="flex flex-col justify-center items-center text-center p-8 rounded-2xl bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 min-h-[350px]">
                    <div id="result-placeholder" class="text-slate-400">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        <p>Enter your measurements to see results</p>
                    </div>

                    <div id="result-display" class="hidden space-y-6 w-full">
                        <div>
                            <p class="text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Estimated Body Fat</p>
                            <h2 id="fat-value" class="text-6xl font-black text-blue-600 dark:text-blue-400 my-2">15.5%</h2>
                            <p id="fat-status" class="text-xl font-bold text-slate-800 dark:text-white">Fitness</p>
                        </div>

                        <!-- Info Grid -->
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-3 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700">
                                <p class="text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase font-bold">Fat Mass</p>
                                <p id="fat-mass" class="text-lg font-bold text-slate-800 dark:text-white">--</p>
                            </div>
                            <div class="p-3 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700">
                                <p class="text-xs text-slate-500 dark:text-slate-400 mb-1 uppercase font-bold">Lean Mass</p>
                                <p id="lean-mass" class="text-lg font-bold text-slate-800 dark:text-white">--</p>
                            </div>
                        </div>

                        <div id="fat-tip" class="p-4 rounded-xl bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800/50 text-sm text-blue-800 dark:text-blue-200 text-left">
                            --
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="ad-placeholder mt-12 h-32 bg-slate-100 dark:bg-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-lg flex items-center justify-center text-slate-400">
            Advertisement Space
        </div>

        <article class="prose prose-slate dark:prose-invert lg:prose-lg mt-16 mx-auto">
            <h2>How to use the Body Fat Calculator</h2>
            <ol>
                <li>Choose your unit system (Metric or Imperial) and select your gender.</li>
                <li>Measure your height, neck, and waist circumference (at the navel for men, at the narrowest point for women).</li>
                <li><strong>For women:</strong> also measure your hip circumference at the widest point.</li>
                <li>Enter the values and click <strong>Calculate Body Fat</strong> to see your estimate.</li>
            </ol>
            <h2>Features</h2>
            <ul>
                <li><strong>U.S. Navy Method:</strong> Uses the scientifically validated formula developed by the U.S. Navy for fitness assessments.</li>
                <li><strong>Gender-Specific:</strong> Tailored calculations for both men and women to account for biological differences in fat distribution.</li>
                <li><strong>Metric & Imperial:</strong> Seamlessly switch between centimeters and inches.</li>
                <li><strong>100% Private:</strong> All calculations happen in your browser. Your measurements never leave your device.</li>
                <li><strong>Instant Breakdown:</strong> Shows your fat mass, lean mass, and overall fitness category.</li>
            </ul>
            <h2>FAQ</h2>
            <h3>What is a healthy body fat percentage?</h3>
            <p>Healthy ranges vary by gender and age. Generally, for men, 14-24% is considered fit/healthy. For women, 21-31% is considered fit/healthy. Athletes may have much lower percentages.</p>
            <h3>How accurate is the Navy Method?</h3>
            <p>While not as accurate as a DXA scan or hydrostatic weighing, the Navy Method is surprisingly reliable (typically within 3-4% accuracy) for most people when measurements are taken precisely.</p>
            <h3>Where should I measure?</h3>
            <p>Measure on bare skin with a flexible tape. <strong>Neck:</strong> Just below the larynx. <strong>Waist:</strong> At the navel for men, at the narrowest point for women. <strong>Hips (Women only):</strong> At the widest point.</p>
            <h3>Does this work for athletes?</h3>
            <p>Athletes with high muscle mass may find this method slightly overestimates fat, as it doesn't account for extreme muscle density.</p>
        </article>
    </main>

    <footer class="border-t border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur mt-20">
        <div class="max-w-7xl mx-auto px-4 py-8 text-sm text-slate-600 dark:text-slate-400 flex flex-col sm:flex-row items-center justify-between gap-3">
            <div>&copy; 2025 WebUtilityKit.com</div>
            <div class="text-slate-500 dark:text-slate-400">Client-side by design. Built for Cloudflare Pages.</div>
        </div>
    </footer>

    <script>
        // === Dark Mode Logic ===
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const storedTheme = localStorage.getItem('wuk-theme');
        const initialTheme = storedTheme || (prefersDark ? 'dark' : 'light');

        document.documentElement.classList.toggle('dark', initialTheme === 'dark');
        themeIcon.textContent = initialTheme === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';

        themeToggle.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('wuk-theme', isDark ? 'dark' : 'light');
            themeIcon.textContent = isDark ? 'ðŸŒ™' : 'â˜€ï¸';
        });

        // === Tool Logic ===
        const btnMetric = document.getElementById('unit-metric');
        const btnImperial = document.getElementById('unit-imperial');
        const unitTexts = document.querySelectorAll('.unit-text');
        const calculateBtn = document.getElementById('calculate-btn');
        const resultPlaceholder = document.getElementById('result-placeholder');
        const resultDisplay = document.getElementById('result-display');
        const fatValue = document.getElementById('fat-value');
        const fatStatus = document.getElementById('fat-status');
        const fatMassText = document.getElementById('fat-mass');
        const leanMassText = document.getElementById('lean-mass');
        const fatTip = document.getElementById('fat-tip');
        const hipContainer = document.getElementById('hip-container');

        const weightUnitText = document.getElementById('weight-unit');
        const weightInput = document.getElementById('weight');

        let currentUnit = 'metric';

        // Listen for gender change to show/hide hip input
        document.querySelectorAll('input[name="gender"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                if (e.target.value === 'female') {
                    hipContainer.classList.remove('hidden');
                } else {
                    hipContainer.classList.add('hidden');
                }
            });
        });

        btnMetric.addEventListener('click', () => {
            currentUnit = 'metric';
            btnMetric.className = 'flex-1 py-2 px-4 rounded-lg text-sm font-bold transition-all bg-white dark:bg-slate-800 shadow-sm text-blue-600 dark:text-blue-400';
            btnImperial.className = 'flex-1 py-2 px-4 rounded-lg text-sm font-bold transition-all text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200';
            unitTexts.forEach(el => el.textContent = 'cm');
            weightUnitText.textContent = 'kg';
        });

        btnImperial.addEventListener('click', () => {
            currentUnit = 'imperial';
            btnImperial.className = 'flex-1 py-2 px-4 rounded-lg text-sm font-bold transition-all bg-white dark:bg-slate-800 shadow-sm text-blue-600 dark:text-blue-400';
            btnMetric.className = 'flex-1 py-2 px-4 rounded-lg text-sm font-bold transition-all text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200';
            unitTexts.forEach(el => el.textContent = 'in');
            weightUnitText.textContent = 'lb';
        });

        calculateBtn.addEventListener('click', () => {
            const gender = document.querySelector('input[name="gender"]:checked').value;
            let weight = parseFloat(weightInput.value);
            let height = parseFloat(document.getElementById('height').value);
            let neck = parseFloat(document.getElementById('neck').value);
            let waist = parseFloat(document.getElementById('waist').value);
            let hip = parseFloat(document.getElementById('hip').value) || 0;

            if (!weight || !height || !neck || !waist || (gender === 'female' && !hip)) {
                alert('Please enter all required measurements.');
                return;
            }

            // Convert to metric for formula if imperial
            const h = currentUnit === 'metric' ? height : height * 2.54;
            const w = currentUnit === 'metric' ? waist : waist * 2.54;
            const n = currentUnit === 'metric' ? neck : neck * 2.54;
            const hp = currentUnit === 'metric' ? hip : hip * 2.54;

            let bodyFat = 0;
            if (gender === 'male') {
                bodyFat = 495 / (1.0324 - 0.19077 * Math.log10(w - n) + 0.15456 * Math.log10(h)) - 450;
            } else {
                bodyFat = 495 / (1.29579 - 0.35004 * Math.log10(w + hp - n) + 0.22100 * Math.log10(h)) - 450;
            }

            if (bodyFat > 0) {
                showResult(bodyFat, gender, weight);
            } else {
                alert('Calculation error. Please check your measurements.');
            }
        });

        function showResult(fat, gender, weight) {
            resultPlaceholder.classList.add('hidden');
            resultDisplay.classList.remove('hidden');
            
            fatValue.textContent = `${fat.toFixed(1)}%`;

            let status = '';
            let color = '';
            let tip = '';

            if (gender === 'male') {
                if (fat < 6) { status = 'Essential Fat'; color = 'text-blue-500'; }
                else if (fat < 14) { status = 'Athletes'; color = 'text-green-500'; }
                else if (fat < 18) { status = 'Fitness'; color = 'text-green-600'; }
                else if (fat < 25) { status = 'Acceptable'; color = 'text-yellow-500'; }
                else { status = 'Obese'; color = 'text-red-500'; }
            } else {
                if (fat < 14) { status = 'Essential Fat'; color = 'text-blue-500'; }
                else if (fat < 21) { status = 'Athletes'; color = 'text-green-500'; }
                else if (fat < 25) { status = 'Fitness'; color = 'text-green-600'; }
                else if (fat < 32) { status = 'Acceptable'; color = 'text-yellow-500'; }
                else { status = 'Obese'; color = 'text-red-500'; }
            }

            fatStatus.textContent = status;
            fatStatus.className = `text-xl font-bold ${color}`;
            fatValue.className = `text-6xl font-black ${color} my-2`;
            
            const fatMass = (fat / 100) * weight;
            const leanMass = weight - fatMass;
            const unit = currentUnit === 'metric' ? 'kg' : 'lb';

            fatMassText.textContent = `${fatMass.toFixed(1)} ${unit}`;
            leanMassText.textContent = `${leanMass.toFixed(1)} ${unit}`;

            tip = `Your body fat is estimated at ${fat.toFixed(1)}%. For a ${gender}, this level is categorized as <strong>${status}</strong>. `;
            if (status === 'Obese' || status === 'Acceptable') {
                tip += "Consider a balanced diet and regular cardiovascular exercise to maintain optimal health.";
            } else {
                tip += "Keep maintaining your current fitness and nutrition routine.";
            }
            fatTip.innerHTML = tip;
        }
    </script>
</body>
</html>

